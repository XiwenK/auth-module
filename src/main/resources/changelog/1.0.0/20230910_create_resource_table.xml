<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">
    <changeSet id="20230910_create_resource_table" author="Alexandr Manunin">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                <![CDATA[
                        SELECT count(*)
                            FROM information_schema.tables
                        WHERE table_schema = 'public'
                         AND table_name = 'resources';
                ]]>
            </sqlCheck>
        </preConditions>
        <sql>
            create table RESOURCES
            (
            ID              bigserial    not null,
            NAME            text         not null,
            DESCRIPTION     varchar(256),
            TYPE            varchar(32)  not null,
            CALENDAR_ID     bigint       not null,
            IS_ACTIVE       boolean      not null
            );

            create unique index RESOURCES_uindex on RESOURCES (ID);

            alter table RESOURCES add constraint RESOURCES_pk primary key (ID);

            COMMENT ON TABLE RESOURCES IS 'Resources table';

            COMMENT ON COLUMN RESOURCES.ID             IS 'Resource id';
            COMMENT ON COLUMN RESOURCES.NAME           IS 'Resource name';
            COMMENT ON COLUMN RESOURCES.DESCRIPTION    IS 'Resource description';
            COMMENT ON COLUMN RESOURCES.TYPE           IS 'Resource type';
            COMMENT ON COLUMN RESOURCES.CALENDAR_ID    IS 'Resource calendar id';
            COMMENT ON COLUMN RESOURCES.IS_ACTIVE      IS 'Resource active flag';
        </sql>
        <rollback>
            <dropTable tableName="RESOURCES"/>
        </rollback>
    </changeSet>
</databaseChangeLog>